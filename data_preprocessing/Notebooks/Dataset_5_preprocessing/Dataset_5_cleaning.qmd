---
title: "Dataset_5_cleaning"
format: html
---

```{r}
use("readr", c("read_csv", "locale", "cols", "col_integer"))
use("here", "here")
use("dplyr", c("select", "glimpse", "mutate"))
Dataset_5 <- read_csv(here("data_preprocessing/Notebooks/Dataset_5_preprocessing/Dataset_5.csv"), 
    col_types = cols(`significant in n/4 datasets` = col_integer()), 
    locale = locale(decimal_mark = ",")) |> 
  
  #rank based on 'mean log2(fold)'  
  mutate(rank = rank(-`mean log2(fold)`, ties.method = "first")) 
       
  
glimpse(Dataset_5)
```



```{r}
# Create a columns with bins = 0.1 for the mean log2(fold)
Dataset_5 <- 
  Dataset_5 |> 
  mutate(bins = cut(`mean log2(fold)`, 
                    breaks = seq(-2, 2, by = 0.1), 
                    include.lowest = TRUE)) 

```


```{r}
# draw dotplot histogram with ggplot2
library(ggplot2)
ggplot(Dataset_5, aes(x = Dataset_5$`mean log2(fold)`)) +
  geom_dotplot(aes(fill = bins), 
               binwidth = 0.1, 
               stackgroups = TRUE, 
               position = "identity") 


  theme_minimal()

```






```{r}
#Save a csv for Dataset_5_cleaned for use in the application 
write.csv(Dataset_5, here("data", "Dataset_5_cleaned.csv"), row.names = FALSE)



```

